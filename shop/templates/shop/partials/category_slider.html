{# templates/shop/partials/category_slider.html #}

{% if categories %}
<section class="im-category-slider my-4">
    <div class="d-flex justify-content-between align-items-center mb-2">
        <h2 class="h6 mb-0">خرید بر اساس دسته‌بندی</h2>
        <a href="{% url 'shop:category_list' %}" class="small text-decoration-none">
            مشاهده همه دسته‌ها
        </a>
    </div>

    <div class="im-category-scroll d-flex flex-nowrap overflow-auto gap-3 py-2">
        {% for cat in categories %}
            <a href="{% url 'shop:category_detail' cat.slug %}"
               class="im-category-item text-center text-decoration-none small flex-shrink-0">
                <div class="im-category-circle mb-1 d-flex align-items-center justify-content-center">
                    {% if cat.icon_image %}
                        <img src="{{ cat.icon_image.url }}"
                             alt="{{ cat.name }}"
                             loading="lazy">
                    {% else %}
                        <span class="im-category-initial">{{ cat.name|first }}</span>
                    {% endif %}
                </div>
                {# این خط: کلاس جدید برای کنترل دوخطی بودن #}
                <div class="text-dark im-category-name">
                    {{ cat.name }}
                </div>
            </a>
        {% empty %}
            <p class="text-muted small mb-0">
                هنوز دسته‌بندی‌ای تعریف نشده است.
            </p>
        {% endfor %}
    </div>
</section>
{% endif %}
